<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Auth Complete</title>
</head>
<body>
  <p>âœ… Login Successful! You can close this window now.</p>

  <script>
    (async () => {
      const urlParams = new URLSearchParams(window.location.search);
      const code = urlParams.get("code");
      const state = urlParams.get("state");

      if (code && state) {
        await fetch("https://framer-plugin-oauth.weareharton.workers.dev/exchange", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ code, state })
        });
      }
    })();
  </script>
</body>
</html>
